var Completable=function(r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;const e=r=>"object"==typeof r&&"function"==typeof r[Symbol.iterator],t=r=>"object"==typeof r&&"function"==typeof r.onSubscribe,o=r=>r instanceof Promise||!!r&&("object"==typeof r||"function"==typeof r)&&"function"==typeof r.then;function n(){const{onComplete:r,controller:e}=this;if(!e.signal.aborted)try{r()}finally{e.abort()}}function s(r){const{onError:e,controller:t}=this;let o=r;if(r instanceof Error||(o=new Error("onError called with a non-Error value.")),!t.signal.aborted)try{e(o)}finally{t.abort()}}const i=r=>r,b=r=>{throw r},c=r=>({onSubscribe:r.onSubscribe,onComplete:"function"==typeof r.onComplete?r.onComplete:i,onError:"function"==typeof r.onError?r.onError:b}),u=e=>{const{onSubscribe:t,onComplete:o}=c(e),n=new r;t(n),n.signal.aborted||(o(),n.abort())},a=(e,t)=>{const{onSubscribe:o,onError:n}=c(e),s=new r;o(s),s.signal.aborted||(n(t),s.abort())};var l=r=>{let e=r;r instanceof Error||(e=new Error("Completable.error received a non-Error value.")),"function"!=typeof r&&(e=(r=>()=>r)(e));const t=new Y;return t.supplier=e,t.subscribeActual=function(r){let e;try{if(void 0===(e=this.supplier()))throw new Error("Completable.error: Error supplier returned an undefined value.")}catch(r){e=r}a(r,e)}.bind(t),t};var f=t=>{if(!e(t))return l(new Error("Completable.amb: sources is not Iterable."));const o=new Y;return o.sources=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),s=new r,{signal:i}=s;if(n(s),i.aborted)return;const{sources:b}=this;for(const r of b){if(i.aborted)return;if(!(r instanceof Y)){o(new Error("Completable.amb: One of the sources is a non-Completable.")),s.abort();break}r.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){t(),s.abort()},onError(r){o(r),s.abort()}})}}.bind(o),o};var d=(e,t)=>{if(!(t instanceof Y))return e;const o=new Y;return o.source=e,o.other=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),s=new r,{signal:i}=s;if(n(s),i.aborted)return;const b=()=>{i.aborted||(t(),s.abort())},u=r=>{i.aborted||(o(r),s.abort())},{source:a,other:l}=this;a.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete:b,onError:u}),l.subscribeWith({onSubscribe(r){i.aborted?r.abort():i.addEventListener("abort",()=>r.abort())},onComplete:b,onError:u})}.bind(o),o};var h=(e,t)=>{if(!(t instanceof Y))return e;const o=new Y;return o.source=e,o.other=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),s=new r,{signal:i}=s;if(n(s),i.aborted)return;const{source:b,other:u}=this;b.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){u.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){t(),s.abort()},onError(r){o(r),s.abort()}})},onError(r){o(r),s.abort()}})}.bind(o),o};var m=e=>{const t=new Y;return t.source=e,t.cached=!1,t.subscribed=!1,t.observers=[],t.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),{source:s,cached:i,observers:b,subscribed:u}=this;if(i){const e=new r;n(e);const{error:s}=this;void 0!==s?o(s):t(),e.abort()}else{const t=b.length;b[t]=e;const o=new r;o.signal.addEventListener("abort",()=>{b.splice(t,1)}),n(o),u||(s.subscribeWith({onSubscribe(){},onComplete:()=>{this.cached=!0;for(const r of b)r.onComplete();this.observers=void 0},onError:r=>{this.cached=!0,this.error=r;for(const e of b)e.onError(r);this.observers=void 0}}),this.subscribed=!0)}}.bind(t),t};let p;var E=()=>(void 0===p&&((p=new Y).subscribeActual=function(r){u(r)}.bind(p)),p),C=(r,e)=>{if("function"!=typeof e)return r;let t;try{if(!((t=e(r))instanceof Y))throw new Error("Completable.compose: transformer returned a non-Completable.")}catch(r){t=l(r)}return t};var v=t=>{if(!e(t))return l(new Error("Completable.concat: sources is not Iterable."));const o=new Y;return o.sources=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),s=new r,{signal:i}=s;if(n(s),i.aborted)return;const{sources:b}=this,u=[];for(const r of b){if(i.aborted)return;if(!(r instanceof Y)){o(new Error("Completable.amb: One of the sources is a non-Completable.")),s.abort();break}u.unshift(r)}if(i.aborted)return;let a;for(const r of u)if(void 0===a)a=(()=>{r.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){t(),s.abort()},onError(r){o(r),s.abort()}})});else{const e=a;a=(()=>{r.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){e()},onError(r){o(r),s.abort()}})})}a()}.bind(o),o};var w=e=>{if("function"!=typeof e)return l(new Error("Completable.create: There are no subscribers."));const t=new Y;return t.subscriber=e,t.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:i}=c(e),b=new r;b.onComplete=n.bind(this),b.onError=s.bind(this),this.controller=b,this.onComplete=t,this.onError=o,i(b);try{this.subscriber(b)}catch(r){b.onError(r)}}.bind(t),t};var S=r=>{const e=new Y;return e.supplier=r,e.subscribeActual=function(r){const{onComplete:e,onError:t,onSubscribe:o}=c(r);let n,s;try{if(!((n=this.supplier())instanceof Y))throw new Error("Completable.defer: supplier returned a non-Completable.")}catch(r){s=r}void 0!==s?a(r,s):n.subscribeWith({onSubscribe:o,onComplete:e,onError:t})}.bind(e),e};var y=(e,t,o)=>{if("number"!=typeof t)return e;const n=new Y;return n.source=e,n.amount=t,n.doDelayError=o,n.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=e,{amount:s,doDelayError:i}=this;let b;const c=new r,{signal:u}=c;n(c),u.aborted||(u.addEventListener("abort",()=>{void 0!==b&&clearTimeout(b)}),this.source.subscribeWith({onSubscribe(r){u.addEventListener("abort",()=>{r.abort()})},onComplete(){b=setTimeout(()=>{t(),c.abort()},s)},onError(r){b=setTimeout(()=>{o(r),c.abort()},i?s:0)}}))}.bind(n),n};var A=(e,t)=>{if("number"!=typeof t)return e;const o=new Y;return o.source=e,o.amount=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=e,{amount:s}=this;let i;const b=new r,{signal:c}=b;c.addEventListener("abort",()=>{void 0!==i&&clearTimeout(i)}),n(b),c.aborted||(i=setTimeout(()=>{this.source.subscribeWith({onSubscribe(r){c.addEventListener("abort",()=>r.abort())},onComplete(){t(),b.abort()},onError(r){o(r),b.abort()}})},s))}.bind(o),o};var W=(r,e)=>{if("function"!=typeof e)return r;const t=new Y;return t.source=r,t.callable=e,t.subscribeActual=function(r){const{onSubscribe:e,onComplete:t,onError:o}=r,{source:n,callable:s}=this;n.subscribeWith({onSubscribe:e,onComplete(){t(),s()},onError(r){o(r),s()}})}.bind(t),t};var g=(r,e)=>{if("function"!=typeof e)return r;const t=new Y;return t.source=r,t.callable=e,t.subscribeActual=function(r){const{onSubscribe:e,onComplete:t,onError:o}=r,{source:n,callable:s}=this;let i=!1;n.subscribeWith({onSubscribe(r){r.signal.addEventListener("abort",()=>{i||(s(),i=!0)}),e(r)},onComplete(){t(),i||(s(),i=!0)},onError(r){o(r),i||(s(),i=!0)}})}.bind(t),t};var L=(r,e)=>{if("function"!=typeof e)return r;const t=new Y;return t.source=r,t.callable=e,t.subscribeActual=function(r){const{onSubscribe:e,onComplete:t,onError:o}=r,{source:n,callable:s}=this;n.subscribeWith({onSubscribe(r){r.signal.addEventListener("abort",s),e(r)},onComplete:t,onError:o})}.bind(t),t};var T=(r,e)=>{if("function"!=typeof e)return r;const t=new Y;return t.source=r,t.callable=e,t.subscribeActual=function(r){const{onSubscribe:e,onComplete:t,onError:o}=r,{source:n,callable:s}=this;n.subscribeWith({onSubscribe:e,onComplete(){s(),t()},onError:o})}.bind(t),t};var O=(r,e)=>{if("function"!=typeof e)return r;const t=new Y;return t.source=r,t.callable=e,t.subscribeActual=function(r){const{onSubscribe:e,onComplete:t,onError:o}=r,{source:n,callable:s}=this;n.subscribeWith({onSubscribe:e,onComplete:t,onError(r){s(r),o(r)}})}.bind(t),t};var P=(r,e)=>{if("function"!=typeof e)return r;const t=new Y;return t.source=r,t.callable=e,t.subscribeActual=function(r){const{onSubscribe:e,onComplete:t,onError:o}=r,{source:n,callable:s}=this;n.subscribeWith({onSubscribe:e,onComplete(){s(),t()},onError(r){s(void 0,r),o(r)}})}.bind(t),t};var k=(r,e)=>{if("function"!=typeof e)return r;const t=new Y;return t.source=r,t.callable=e,t.subscribeActual=function(r){const{onSubscribe:e,onComplete:t,onError:o}=r,{source:n,callable:s}=this;n.subscribeWith({onSubscribe(r){s(r),e(r)},onComplete:t,onError:o})}.bind(t),t};var x=(r,e)=>{if("function"!=typeof e)return r;const t=new Y;return t.source=r,t.callable=e,t.subscribeActual=function(r){const{onSubscribe:e,onComplete:t,onError:o}=r,{source:n,callable:s}=this;n.subscribeWith({onSubscribe:e,onComplete(r){s(),t(r)},onError(r){s(),o(r)}})}.bind(t),t};var I=e=>{if(!o(e))return l(new Error("Completable.fromPromise: expects a Promise-like value."));const t=new Y;return t.promise=e,t.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:i}=e,b=new r;i(b),b.signal.aborted||(this.controller=b,this.onComplete=t,this.onError=o,this.promise.then(n.bind(this),s.bind(this)))}.bind(t),t};var R=e=>{if("function"!=typeof e)return l(new Error("Completable.fromCallable: callable received is not a function."));const t=new Y;return t.callable=e,t.subscribeActual=function(e){const{onComplete:t,onError:i,onSubscribe:b}=e,c=new r;if(b(c),c.signal.aborted)return;this.controller=c,this.onComplete=t,this.onError=i;const u=n.bind(this),a=s.bind(this);let l;try{l=this.callable()}catch(r){return void a(r)}o(l)?I(l).subscribe(t,i):u(l)}.bind(t),t};var U=e=>{if("function"!=typeof e)return l(new Error("Completable.fromResolvable: expects a function."));const t=new Y;return t.subscriber=e,t.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:i}=e,b=new r;if(i(b),b.signal.aborted)return;this.controller=b,this.onComplete=t,this.onError=o;const c=n.bind(this),u=s.bind(this);this.subscriber(c,u)}.bind(t),t};var j=(r,e)=>{if("function"!=typeof e)return r;const o=new Y;return o.source=r,o.operator=e,o.subscribeActual=function(r){let e;try{if(e=this.operator(r),!t(e))throw new Error("Completable.lift: operator returned a non-Observer.")}catch(e){return void a(r,e)}this.source.subscribeWith(e)}.bind(o),o};var D=t=>{if(!e(t))return l(new Error("Completable.concat: sources is not Iterable."));const o=new Y;return o.sources=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),s=new r,{signal:i}=s;if(n(s),i.aborted)return;const{sources:b}=this,u=[];for(const r of b){if(i.aborted)return;if(!(r instanceof Y)){o(new Error("Completable.amb: One of the sources is a non-Completable.")),s.abort();break}u.unshift(r)}if(i.aborted)return;let a=u.length;for(const r of u)r.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){0==(a-=1)&&(t(),s.abort())},onError(r){o(r),s.abort()}});(void 0)()}.bind(o),o};var N=(e,t)=>{if(!(t instanceof Y))return e;const o=new Y;return o.source=e,o.other=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),s=new r,{signal:i}=s;if(n(s),i.aborted)return;const{source:b,other:u}=this;let a=!1,l=!1;b.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){a=!0,l&&(t(),s.abort())},onError(r){o(r),s.abort()}}),u.subscribeWith({onSubscribe(r){i.aborted?r.abort():i.addEventListener("abort",()=>r.abort())},onComplete(){l=!0,a&&(t(),s.abort())},onError(r){o(r),s.abort()}})}.bind(o),o};const F={signal:{aborted:!1,addEventListener:()=>{},removeEventListener:()=>{},onabort:()=>{}},abort:()=>{}};let q;var z=()=>(void 0===q&&((q=new Y).subscribeActual=function(r){r.onSubscribe(F)}.bind(q)),q);var B=(r,e)=>{if("function"!=typeof e)return r;const t=new Y;return t.source=r,t.item=e,t.subscribeActual=function(r){const{onComplete:e,onError:t,onSubscribe:o}=c(r),{source:n,item:s}=this;n.subscribeWith({onSubscribe:o,onComplete:e,onError(r){let o;try{o=s(r)}catch(e){return void t([r,e])}o?e():t(r)}})}.bind(t),t};var G=(e,t)=>{if(!("function"==typeof t||t instanceof Y))return e;const o=new Y;return o.source=e,o.resumeIfError=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),{source:s,resumeIfError:i}=this,b=new r,{signal:u}=b;n(b),u.aborted||s.subscribeWith({onSubscribe(r){u.addEventListener("abort",()=>r.abort())},onComplete(){t(),b.abort()},onError(r){let e;if("function"==typeof i)try{if(void 0===(e=i(r)))throw new Error("Completable.onErrorResumeNext: returned an non-Completable.")}catch(e){return void o(new Error([r,e]))}else e=i;e.subscribeWith({onSubscribe(r){u.addEventListener("abort",()=>r.abort())},onComplete(){t(),b.abort()},onError(r){o(r),b.abort()}})}})}.bind(o),o};var H=(e,t)=>{if(void 0!==t){if("number"!=typeof t)return e;if(t<=0)return e}const o=new Y;return o.source=e,o.times=t,o.subscribeActual=function(e){const{onSubscribe:t,onComplete:o,onError:n}=c(e),s=new r,{signal:i}=s;if(t(s),i.aborted)return;const{source:b,times:u}=this;let a=0;const l=()=>{i.aborted||(a+=1,b.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){"number"==typeof u?a<=u?l():o():l()},onError(r){n(r),s.abort()}}))};l()}.bind(o),o};var J=(e,t)=>{const o=new Y;return o.source=e,o.predicate=t,o.subscribeActual=function(e){const{onSubscribe:t,onComplete:o,onError:n}=c(e),s=new r,{signal:i}=s;if(t(s),i.aborted)return;const{source:b,predicate:u}=this,a=()=>{i.aborted||b.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){"function"==typeof u&&u()?o():a()},onError(r){n(r),s.abort()}})};a()}.bind(o),o};var K=(e,t)=>{const o=new Y;return o.source=e,o.bipredicate=t,o.subscribeActual=function(e){const{onSubscribe:t,onComplete:o,onError:n}=c(e),s=new r,{signal:i}=s;if(t(s),i.aborted)return;const{source:b,bipredicate:u}=this;let a=0;const l=()=>{i.aborted||(a+=1,b.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){o(),s.abort()},onError(r){"function"==typeof u?u(a,r)?l():(n(r),s.abort()):l()}}))};l()}.bind(o),o};var M=(e,t)=>{if(!(t instanceof Y))return e;const o=new Y;return o.source=e,o.other=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),s=new r,{signal:i}=s;if(n(s),i.aborted)return;const{source:b,other:u}=this;u.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){b.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){t(),s.abort()},onError(r){o(r),s.abort()}})},onError(r){o(r),s.abort()}})}.bind(o),o};const Q=(e,t)=>{if(!(t instanceof Y))return e;const o=new Y;return o.source=e,o.other=t,o.subscribeActual=function(e){const{onSubscribe:t,onComplete:o,onError:n}=c(e),s=new r,{signal:i}=s;if(t(s),i.aborted)return;const{source:b,other:u}=this;u.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){i.aborted||(n(new Error("Completable.takeUntil: Source cancelled by other Completable.")),s.abort())},onError(r){i.aborted||(n(new Error(["Completable.takeUntil: Source cancelled by other Completable.",r])),s.abort())}}),b.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onComplete(){i.aborted||(o(),s.abort())},onError(r){i.aborted||(n(r),s.abort())}})}.bind(o),o};var V=(e,t)=>{if("number"!=typeof t)return e;const o=new Y;return o.source=e,o.amount=t,o.subscribeActual=function(e){const{onComplete:t,onError:o,onSubscribe:n}=c(e),{amount:s}=this,i=new r,{signal:b}=i;if(n(i),b.aborted)return;const u=setTimeout(()=>{o(new Error("Completable.timeout: TimeoutException (no complete signals within the specified timeout).")),i.abort()},s);b.addEventListener("abort",()=>{clearTimeout(u)}),this.source.subscribeWith({onSubscribe(r){b.addEventListener("abort",()=>r.abort())},onComplete(){t(),i.abort()},onError(r){o(r),i.abort()}})}.bind(o),o};var X=e=>{if("number"!=typeof e)return l(new Error('Completable.timer: "amount" is not a number.'));const t=new Y;return t.amount=e,t.subscribeActual=function(e){const{onComplete:t,onSubscribe:o}=c(e),n=new r,{signal:s}=n;if(o(n),s.aborted)return;const i=setTimeout(t,this.amount);s.addEventListener("abort",()=>{clearTimeout(i)})}.bind(t),t};class Y{static amb(r){return f(r)}ambWith(r){return d(this,r)}andThen(r){return h(this,r)}cache(){return m(this)}static complete(){return E()}compose(r){return C(this,r)}static concat(r){return v(r)}concatWith(r){return h(this,r)}static create(r){return w(r)}static defer(r){return S(r)}delay(r,e){return y(this,r,e)}delaySubscription(r){return A(this,r)}doAfterTerminate(r){return W(this,r)}doFinally(r){return g(this,r)}doOnAbort(r){return L(this,r)}doOnComplete(r){return T(this,r)}doOnError(r){return O(this,r)}doOnEvent(r){return P(this,r)}doOnSubscribe(r){return k(this,r)}doOnTerminate(r){return x(this,r)}static error(r){return l(r)}static fromCallable(r){return R(r)}static fromPromise(r){return I(r)}static fromResolvable(r){return U(r)}lift(r){return j(this,r)}static merge(r){return D(r)}mergeWith(r){return N(this,r)}static never(){return z()}onErrorComplete(r){return B(this,r)}onErrorResumeNext(r){return G(this,r)}repeat(r){return H(this,r)}retry(r){return K(this,r)}repeatUntil(r){return J(this,r)}startWith(r){return M(this,r)}takeUntil(r){return Q(this,r)}timeout(r){return V(this,r)}static timer(r){return X(r)}subscribeWith(r){t(r)&&this.subscribeActual(r)}subscribe(e,t){const o=new r;let n=!1;return this.subscribeActual({onSubscribe(r){r.signal.addEventListener("abort",()=>{n||(n=!0,o.signal.aborted||o.abort())}),o.signal.addEventListener("abort",()=>{n||(n=!0,r.signal.aborted||r.abort())})},onComplete:e,onError:t}),o}toPromise(){return new Promise((r,e)=>{this.subscribe(r,e)})}then(r,e){return this.toPromise().then(r,e)}catch(r){return this.toPromise().catch(r)}}return Y}(AbortController);